<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Свой сайт с блэкдежком..</title>
</head>
<body>
    <h1>Мой личный сайт с блэкджеком...</h1>
    <section>
        <h2>Правила</h2>
        <p>методом рандома получаем карту со зачением от 2 до 11 (в колоде 54 карты, туз - 11 очков, король - 4 очка, дама - 3 очка, валет - 2 очка, 2 - 2 очка;...... 10 - 10 очков)</p>
        <p>Каждому игроку сдается по 2 карты. У кого больше очков - выиграл. У кого будет больше 21 - проиграл.</p>
    </section>
    <br>
    <button onclick="cardTake()" id="button"><b>Федор</b> возмите карту</button>
    <button style="display: none" onClick="window.location.href=window.location.href" id="reset">Начать заново</button>
    <i style="color: red; font-weight: bold" id="result"></i>
    <br><br>
    <i><b class="name">Федор</b> получил карту: <span id="card"></span></i><br><br>
    <p style="font-weight: bold">Количество очков у Федора: <span id="fedorPoints">0</span></p>
    <i>Полученные карты: <span id="logF"></span></i>
    <p style="font-weight: bold">Количество очков у Петра: <span id="peterPoints">0</span></p>
    <i>Полученные карты: <span id="logP"></span></i>
    <script>

    let resMessage = "";
    let fedorPoints = 0;
    let peterPoints = 0;
    let i = 0;
    const logArray = [];
    const fedorCardLog = document.getElementById("logF");
    const peterCardLog = document.getElementById("logP");
    const name = document.getElementsByTagName("b");
    const result = document.getElementById("result");
    const button = document.getElementById("button");
    const reset = document.getElementById("reset");
    function cardTake() {
        //Рандомный подбор карт
        while (true) {
            let card = parseInt(Math.random() * 100);
            if (card >= 2 && card <= 11) {
                document.getElementById("card").innerHTML = card;
                logArray.push(card);
                //ВЫВОД ЛОГА ПОЛУЧЕННЫХ КАРТ
                const log = ((i === 0 || i === 2) ? fedorCardLog.innerHTML = [logArray[0], logArray[2]].join(", ") : peterCardLog.innerHTML = [logArray[1], logArray[3]].join(", ") );
                //СМЕНА ИМЕНИ ИГРОКА НА КНОПКЕ
                if (i < 3) {
                    if (i === 1) {
                        name[1].innerHTML = "Петр";
                        peterPoints += card;
                        document.getElementById("peterPoints").innerHTML = peterPoints;
                        i++;
                        name[0].innerHTML = "Федор";
                    } else  {
                        name[1].innerHTML = "Федор";
                        fedorPoints += card;
                        document.getElementById("fedorPoints").innerHTML = fedorPoints;
                        i++;
                        name[0].innerHTML = "Петр";
                    }
                    return;
                } else {
                    name[1].innerHTML = "Петр";
                    peterPoints += card;
                    document.getElementById("peterPoints").innerHTML = peterPoints;
                    ///////////////////////ОПРЕДЕЛЕНИЕ И ВЫВОД ПОБЕДИТЕЛЯ/////////////////////////////////////
                    if (fedorPoints > 21 || peterPoints > 21) {
                        if (fedorPoints === peterPoints) {
                            resMessage = "Вы оба проиграли! лузера :)";
                        } else {
                            resMessage = ((fedorPoints > 21) ? "Петр победил! Федор проиграл, т.к. набрал больше 21." : "Федор победил! Петр проиграл, т.к. набрал больше 21." );
                        }
                    }
                    if (fedorPoints <= 21 && peterPoints <= 21 ) {
                        if (fedorPoints === peterPoints) {
                            resMessage = "Боевая ничья!";
                        } else {
                            resMessage = ((fedorPoints > peterPoints) ? "Федор победил!" : "Петр победил!");
                        }
                    }
                    result.innerHTML = resMessage;
                    button.style.display = "none";
                    reset.style.display = "inline";
                    break;
                }
            }
        }
    }
    </script>
</body>
</html>